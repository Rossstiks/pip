# Инструкции для репозитория

Этот проект предназначен для создания сайта‑генератора юридических документов. Основные возможности:

- Поиск по существующим HTML‑шаблонам документов.
- Добавление новых шаблонов через админ‑интерфейс.
- Автоматическое присвоение тегов при помощи ChatGPT (Codex).

## Технологический стек
- **Frontend:** Next.js + React.
- **Backend:** Node.js + Express. Реализует CRUD для шаблонов и прокси к OpenAI API.
- **Хранение:** PostgreSQL для данных и S3/MinIO для файлов шаблонов.
- **Клиентский поиск:** Fuse.js или Lunr.js.

## Правила для контрибьюторов
1. Соблюдайте структуру проекта: `client/` — фронтенд, `server/` — бэкенд, `db/` — миграции, `templates/` — исходные HTML.
2. Перед коммитом запускайте `npm test` и `npm run lint` (если они присутствуют).
3. Не добавляйте в репозиторий персональные данные пользователей.
4. Все вызовы OpenAI должны логироваться с сохранением prompt и ID ответа.
5. Обновляйте документацию и клиентский индекс при добавлении или изменении шаблонов.

## Базовый сценарий добавления шаблона
1. Загрузите HTML‑файл через админ‑панель или CLI.
2. Сервис валидирует placeholders и извлекает `data-tags` из тега `<article>`.
3. Если тегов нет, отправьте описание ситуации в ChatGPT и сохраните возвращённые теги.
4. Файл помещается в S3, записи о шаблоне и тегах обновляются в базе данных.
5. Клиентский индекс пересоздаётся и рассылается на фронтенд.

